<Page
    x:Class="Next_Future_ERP.Features.Warehouses.Views.WarehousesView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:core="clr-namespace:Next_Future_ERP.Core.Controls"
    Title="المستودعات"
    FlowDirection="RightToLeft"
    Background="#F7F9FC">

    <Page.Resources>
        <Style TargetType="Button" x:Key="ToolbarBtn">
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="Margin" Value="6,0,0,0"/>
        </Style>
        <Style TargetType="DataGrid">
            <Setter Property="RowHeight" Value="36"/>
            <Setter Property="AlternationCount" Value="2"/>
            <Setter Property="AlternatingRowBackground" Value="#FAFAFA"/>
            <Setter Property="CanUserAddRows" Value="False"/>
            <Setter Property="IsReadOnly" Value="True"/>
            <Setter Property="SelectionMode" Value="Single"/>
        </Style>
    </Page.Resources>

    <DockPanel Margin="12">
        <!-- شريط أدوات -->
        <Border DockPanel.Dock="Top" Background="#F3F4F6" CornerRadius="8" Padding="10" Margin="0,0,0,10">
            <core:CommandBar DataContext="{Binding}"
                             NewCommand="{Binding NewDialogCommand}"
                             EditCommand="{Binding EditDialogCommand}"
                             SaveCommand="{x:Null}"
                             DeleteCommand="{Binding DeleteCommand}"
                             RefreshCommand="{Binding RefreshCommand}"
                             SearchCommand="{Binding LoadCommand}" />
        </Border>

        <!-- القائمة -->
        <DataGrid ItemsSource="{Binding Items}"
                  SelectedItem="{Binding SelectedItem, Mode=TwoWay}"
                  AutoGenerateColumns="False"
                  MouseDoubleClick="DataGrid_MouseDoubleClick">
            <DataGrid.Columns>
                <DataGridTextColumn Header="الكود" Binding="{Binding WarehouseCode}" Width="120"/>
                <DataGridTextColumn Header="الاسم" Binding="{Binding WarehouseName}" Width="*"/>
                <DataGridTextColumn Header="الموقع" Binding="{Binding Location}" Width="220"/>
                <DataGridTextColumn Header="نوع المستودع" Binding="{Binding WarehouseType}" Width="140"/>
                <DataGridTextColumn Header="المدير" Binding="{Binding ManagerID}" Width="100"/>
                <DataGridCheckBoxColumn Header="مفعل" Binding="{Binding IsActive}" Width="80"/>
                <DataGridCheckBoxColumn Header="افتراضي" Binding="{Binding IsDefault}" Width="80"/>
                <DataGridCheckBoxColumn Header="يسمح بالسالب" Binding="{Binding AllowNegativeStock}" Width="100"/>
                <DataGridCheckBoxColumn Header="يستخدم الصناديق" Binding="{Binding UseBins}" Width="100"/>
            </DataGrid.Columns>
            <DataGrid.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="تعديل" Command="{Binding DataContext.EditDialogCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"/>
                    <MenuItem Header="حذف" Command="{Binding DataContext.DeleteCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"/>
                </ContextMenu>
            </DataGrid.ContextMenu>
        </DataGrid>
    </DockPanel>
</Page>

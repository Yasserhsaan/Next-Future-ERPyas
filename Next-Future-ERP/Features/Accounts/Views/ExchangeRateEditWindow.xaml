<Window x:Class="Next_Future_ERP.Features.Accounts.Views.ExchangeRateEditWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="{Binding WindowTitle}" Height="500" Width="800"
        WindowStartupLocation="CenterOwner"
        FlowDirection="RightToLeft"
        Background="#F7F9FC"
        ResizeMode="CanResizeWithGrip"
        MinWidth="700" MinHeight="400"
        Loaded="Window_Loaded">

    <!-- Ø§Ø®ØªØµØ§Ø±Ø§Øª -->
    <Window.InputBindings>
        <KeyBinding Key="S" Modifiers="Ctrl" Command="{Binding SaveCommand}"/>
        <KeyBinding Key="Escape" Command="{Binding CancelCommand}"/>
    </Window.InputBindings>

    <Window.Resources>
        <!-- Ø£Ù„ÙˆØ§Ù† -->
        <SolidColorBrush x:Key="CardBg" Color="#FFFFFFFF"/>
        <SolidColorBrush x:Key="CardBorder" Color="#E6EAF0"/>
        <SolidColorBrush x:Key="Soft" Color="#F3F4F6"/>
        <SolidColorBrush x:Key="Accent" Color="#3B82F6"/>
        <SolidColorBrush x:Key="AccentDark" Color="#2563EB"/>
        <SolidColorBrush x:Key="Muted" Color="#64748B"/>

        <!-- Ø­Ø§ÙˆÙŠØ© -->
        <Style x:Key="CardBorderStyle" TargetType="Border">
            <Setter Property="Background" Value="{StaticResource CardBg}"/>
            <Setter Property="BorderBrush" Value="{StaticResource CardBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="16"/>
            <Setter Property="Padding" Value="14"/>
        </Style>

        <!-- Ù…Ø¯Ø®Ù„Ø§Øª -->
        <Style TargetType="TextBox">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#E2E8F0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10,8"/>
        </Style>
        <Style TargetType="ComboBox">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#E2E8F0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="6,4"/>
        </Style>
        <Style TargetType="DatePicker">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#E2E8F0"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="6,4"/>
        </Style>
        <Style TargetType="Button" x:Key="PrimaryBtn">
            <Setter Property="Background" Value="{StaticResource Accent}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="BorderBrush" Value="{StaticResource AccentDark}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>
    </Window.Resources>

    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/> <!-- Ø£Ø²Ø±Ø§Ø± Ø£Ø¹Ù„Ù‰ -->
            <RowDefinition Height="*"/>    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
            <RowDefinition Height="Auto"/> <!-- ØªÙ„Ù…ÙŠØ­ Ø³ÙÙ„ÙŠ -->
        </Grid.RowDefinitions>

        <!-- Ø´Ø±ÙŠØ· Ø£Ø¹Ù„Ù‰ -->
        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
            <Button Content="Ø­ÙØ¸" Width="130" Style="{StaticResource PrimaryBtn}"
                    Command="{Binding SaveCommand}" Margin="0,0,10,0"/>
            <Button Content="Ø¥Ù„ØºØ§Ø¡" Width="110" Command="{Binding CancelCommand}"/>
        </StackPanel>

        <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ -->
        <Border Grid.Row="1" Style="{StaticResource CardBorderStyle}">
            <Grid Margin="4">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="1*"/>
                    <ColumnDefinition Width="1*"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                    <!-- Ø§Ù„Ø¹Ù…Ù„Ø© -->
                    <StackPanel Grid.Column="0" Margin="8">
                        <TextBlock Text="Ø§Ù„Ø¹Ù…Ù„Ø©" Foreground="{StaticResource Muted}" FontSize="12"/>
                        <ComboBox ItemsSource="{Binding Currencies}"
                                  SelectedValue="{Binding Model.CurrencyId}"
                                  SelectedValuePath="CurrencyId"
                                  DisplayMemberPath="CurrencyNameAr"/>
                    </StackPanel>

                    <!-- Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù -->
                    <StackPanel Grid.Column="1" Margin="8">
                        <TextBlock Text="Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù" Foreground="{StaticResource Muted}" FontSize="12"/>
                        <TextBox Text="{Binding Model.ExchangeRate, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                    </StackPanel>

                    <!-- ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø¡ -->
                    <StackPanel Grid.Row="1" Grid.Column="0" Margin="8">
                        <TextBlock Text="ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø¯Ø¡" Foreground="{StaticResource Muted}" FontSize="12"/>
                        <DatePicker SelectedDate="{Binding Model.DateExchangeStart, Mode=TwoWay}"/>
                    </StackPanel>

                    <!-- ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡ -->
                    <StackPanel Grid.Row="1" Grid.Column="1" Margin="8">
                        <TextBlock Text="ØªØ§Ø±ÙŠØ® Ø§Ù„Ø§Ù†ØªÙ‡Ø§Ø¡" Foreground="{StaticResource Muted}" FontSize="12"/>
                        <DatePicker SelectedDate="{Binding Model.DateExchangeEnd, Mode=TwoWay}"/>
                    </StackPanel>

                    <!-- Ù†Ø´Ø· -->
                    <StackPanel Grid.Row="2" Grid.Column="0" Margin="8">
                        <CheckBox IsChecked="{Binding Model.Status, Mode=TwoWay}" Content="Ù†Ø´Ø·" VerticalAlignment="Center"/>
                    </StackPanel>

                    <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© -->
                    <Border Grid.ColumnSpan="2" Grid.Row="3" Margin="8,16,8,0" Padding="12"
                            Background="#F9FAFB" BorderBrush="#E5E7EB" BorderThickness="1" CornerRadius="10">
                        <StackPanel>
                            <TextBlock Text="Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©" FontWeight="SemiBold" Foreground="#111827" Margin="0,0,0,8"/>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Column="0" Text="Ù…Ø¹Ø±Ù Ø³Ø¹Ø± Ø§Ù„ØµØ±Ù:" Foreground="#6B7280" Margin="0,0,10,0"/>
                                <TextBlock Grid.Column="1" Text="{Binding Model.Id}" 
                                           FontWeight="SemiBold" Foreground="#111827"/>
                            </Grid>
                        </StackPanel>
                    </Border>
                </Grid>
            </Border>

            <!-- Ø´Ø±ÙŠØ· Ø³ÙÙ„ÙŠ -->
            <TextBlock Grid.Row="2"
                       Text="ðŸ’¡ Ù†ØµÙŠØ­Ø©: ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø­ÙØ¸."
                       Foreground="{StaticResource Muted}" Margin="4,10,0,0"/>
        </Grid>
    </Window>

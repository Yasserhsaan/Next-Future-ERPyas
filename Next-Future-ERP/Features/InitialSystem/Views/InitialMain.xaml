<ui:FluentWindow
    x:Class="Next_Future_ERP.Features.InitialSystem.Views.InitialMain"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:controls="clr-namespace:Wpf.Ui.Controls;assembly=Wpf.Ui"
    xmlns:i18n="http://schemas.lepo.co/i18n/2022/xaml"
    xmlns:tray="http://schemas.lepo.co/wpfui/2022/xaml/tray"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    xmlns:local="clr-namespace:Next_Future_ERP.Features.InitialSystem.Views"
    xmlns:vm="clr-namespace:Next_Future_ERP.Features.InitialSystem.ViewModels"
    mc:Ignorable="d"
    ui:Design.Background="{Binding ApplicationBackgroundBrush}"
    ui:Design.Foreground="{Binding TextFillColorPrimaryBrush}"
    FlowDirection="RightToLeft"
    WindowBackdropType="Mica"
    ExtendsContentIntoTitleBar="True"
    WindowCornerPreference="Default"
    WindowStartupLocation="CenterScreen"
    Title="InitialMain"
    Height="750" Width="850">

    <Window.DataContext>
        <vm:InitialMainViewModel />
    </Window.DataContext>




    <Grid>
       
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!-- Sidebar Navigation -->
        <Border 
            Grid.Column="0"  
             Padding="10,20,0,20"
            Background="{DynamicResource BackgroundBrush}">

            <ui:ListView 
                Background="{DynamicResource BackgroundBrush}"
                ItemsSource="{Binding Steps}" 
                SelectedIndex="{Binding CurrentStepIndex, Mode=TwoWay}"
                SelectionMode="Single"
                
          
                >
                <ui:ListView.ItemTemplate>
                    <DataTemplate  >
                        <TextBlock Margin="8,4" Text="{Binding Title}" />
                    </DataTemplate>
                </ui:ListView.ItemTemplate>
            </ui:ListView>


          
        </Border>

        <!-- Main Content -->
        <Border Grid.Column="1"
            Background="{DynamicResource ApplicationBackgroundBrush}"
            CornerRadius="20"
            Padding="20"
           
           >
            
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!-- Dynamic Page Content -->
                <ContentControl Content="{Binding CurrentPage}" />

                <!-- Bottom Button -->
                <StackPanel Grid.Row="1"
                        Orientation="Horizontal"
                       
                        Margin="10,20,0,0">
                    <ui:Button Content="السابق" 
                       Command="{Binding PreviousStepCommand}" 
                       IsEnabled="{Binding CanGoBack}" 
                       Appearance="Secondary"
                       Width="100" />

                    <ui:Button Content="التالي"
                   Command="{Binding NextStepCommand}" 
                   IsEnabled="{Binding CanGoNext}" 
                   Appearance="Primary"
                   Width="100"
                   Margin="10,0,0,0" /> 
                </StackPanel>
                
            </Grid>
            
            
        </Border>

      
    </Grid>
    
</ui:FluentWindow>